<div class="arkham-horror-tools">
  <h2>Arkham Horror Tools - Token Bag</h2>

  <!-- Mostra InitBag solo se la sacca è vuota -->
  <div *ngIf="isInitBag">
    <button mat-raised-button color="primary" (click)="openInitBagDialog()">InitBag</button>
  </div>

  <!-- Mostra i pulsanti quando la sacca è inizializzata -->
  <div *ngIf="tokens.length > 0" class="button-grid">
    <div class="button-row">
      <button mat-raised-button color="primary" (click)="openAddTokenDialog()">AddToken</button>
      <button mat-raised-button color="accent" (click)="drawTokens(2)">Draw 2 Tokens</button>
    </div>
    <div class="button-row">
      <button mat-raised-button color="warn" (click)="resetBag()">Reset Bag</button>
      <button mat-raised-button color="warn" (click)="cleanBag()">Clean Bag</button>
    </div>
    <div class="button-row">
      <button mat-raised-button color="accent" (click)="showLastTokenDrawn()" *ngIf="lastTokenDrawn.length > 0">
        Show Last Tokens Drawn
      </button>
      <button mat-raised-button color="accent" (click)="openTurnDialog()" *ngIf="turnExtractedTokens.length > 0">
        Show Tokens Drawn in this round
      </button>
    </div>
    <div class="button-row" *ngIf="turnExtractedTokens.length > 0">
      <button mat-raised-button color="primary" (click)="endTurn()">End Turn</button>
    </div>
  </div>

  <!-- Sezione per la lista dei token nella bag -->
  <div class="bag-status" *ngIf="tokens.length > 0">
    <h3>Tokens in Bag: {{ tokens.length }}</h3>
    <ul>
      <li *ngFor="let token of getTokenCounts()">
        {{ token.count }} x {{ token.name }}
      </li>
    </ul>
  </div>

  <!-- Sezione per la lista dei token estratti -->
  <div class="extracted-status" *ngIf="extractedTokens.length > 0">
    <h3>Extracted Tokens: {{ extractedTokens.length }}</h3>
    <ul>
      <li *ngFor="let token of extractedTokens; let i = index" 
          [ngClass]="{ 'last-extracted': i >= extractedTokens.length - 2 }">
        {{ token.name }}
      </li>
    </ul>
  </div>

  <p class="version">Version: {{version}}</p>
</div>
